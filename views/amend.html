{{extend './_layouts/home.html'}}

{{block 'title'}}{{'多人博客 - 首页'}}{{/block}}
{{block 'head'}}

<link rel="stylesheet" href="../public/css/style.css">
{{/block}}
{{block 'body'}}
<section class="container">
  <div class="row">
    <div class="col-md-5 banxin">
      <form method="post" action='/myblog/amend' id="form1">
        <div class="form-group" >
        </div>
        <div class="form-group">
          <label for="exampleInputEmail1" >标题</label>
          <input name="title" type="text" class="form-control form-input" id="exampleInputEmail1"  placeholder="{{Blogs.title}}">
        </div>
        <div class="form-group">
          <label for="">选择板块</label>
          <select class="form-control" name="model">
            <option value="0">时事</option>
            <option value="1">经济</option>
            <option value="2">技术</option>
            <option value="3">测试</option>
          </select>
        </div>
        
        <div class="download">
          <label for="">内容</label>
          
          <div id="div1">
            <p>{{Blogs.article}}</p>
        </div>
        </div>
        <script src="../node_modules/wangeditor/dist/wangEditor.js"></script>
          <!-- <script>
            function btnsubmit(){
            const wtext = editor.txt.text()
            alert(editor.txt.text())
  
          }
          </script> -->
        <textarea id="text1" style="display:none;width:100%; height:200px;" class="form-control" rows="6" name="article"></textarea>
        <input type="text" name="img" id="imgc" style="display:none;" value="{{Blogs.img}}">
        <input type="text" name="id"  style="display:none;" value="{{Blogs._id}}">
        <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
        <script type="text/javascript">
            const E = window.wangEditor
            const editor = new E('#div1')
            const $text1 = $('#text1')
            editor.config.onchange = function (html) {
                // 第二步，监控变化，同步更新到 textarea
                $text1.val(editor.txt.text())
            }
            
            editor.config.uploadImgServer = '/upload'
            
            editor.create()
        
            // 第一步，初始化 textarea 的值
            $text1.val(editor.txt.html())
           
            // function changeLink(){
            // 	document.getElementById('myAnchor').innerHTML="RUNOOB";
            // 	document.getElementById('myAnchor').href="//www.runoob.com";
            // 	document.getElementById('myAnchor').target="_blank";
            // }
            
         </script>
         <script>
           function checkField(val)
                {
                	document.getElementById('imgc').value  = val;
                }
         </script>
        <button type="submit" id="btnsu" class="btn btn-default">Submit</button>
     </form>
      <div class="upwang">
        <form action="/upload" method="post" enctype="multipart/form-data" id="form2">
          <label for="">图片上传</label>
        <input type="file" name="img" id="img" onchange="checkField(this.value)" value="{{Blogs.img}}">
        <input type="submit" id="btnimg" value="提交" >
      </form>
      </div>
      
    </div>
  </div>
</section>
{{/block}}
