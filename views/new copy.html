{{extend './_layouts/home.html'}}

{{block 'title'}}{{'多人博客 - 首页'}}{{/block}}
{{block 'head'}}

<link rel="stylesheet" href="../../public/css/style.css">
{{/block}}
{{block 'body'}}
<section class="container">
  <div class="row">
    <div class="col-md-5 banxin">
      <form method="post" action='/topics/new' enctype="multipart/form-data">
        <div class="form-group" >
        </div>
        <div class="form-group">
          <label for="exampleInputEmail1">标题</label>
          <input name="title" type="text" class="form-control form-input" id="exampleInputEmail1">
        </div>
        <div class="form-group">
          <label for="">选择板块</label>
          <select class="form-control" name="model">
            <option value="0">时事</option>
            <option value="1">经济</option>
            <option value="2">技术</option>
            <option value="3">测试</option>
          </select>
        </div>
        <div>
          <label for="">内容</label>
          
          <div id="div1">
            <p>欢迎使用 <b>wangEditor</b> 富文本编辑器</p>
        </div>
        </div>
        <script src="../node_modules/wangeditor/dist/wangEditor.js"></script>
          <!-- <script>
            function btnsubmit(){
            const wtext = editor.txt.text()
            alert(editor.txt.text())
  
          }
          </script> -->
        <textarea id="text1" style="display:none;width:100%; height:200px;" class="form-control" rows="6" name="article"></textarea>
       
        <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
        <script type="text/javascript">
            const E = window.wangEditor
            const editor = new E('#div1')
            const $text1 = $('#text1')
            editor.config.onchange = function (html) {
                // 第二步，监控变化，同步更新到 textarea
                $text1.val(editor.txt.text())
            }
            editor.config.uploadImgServer = '/public/upload/'

            editor.config.customUploadImg = function (resultFiles, insertImgFn) {
    // resultFiles 是 input 中选中的文件列表
    // insertImgFn 是获取图片 url 后，插入到编辑器的方法
    // 上传图片，返回结果，将图片插入到编辑器中
    insertImgFn(imgUrl)
}
            editor.create()
        
            // 第一步，初始化 textarea 的值
            $text1.val(editor.txt.html())
            
        </script>
        <button type="submit" onclick="btnsubmit()" id="btnsu" class="btn btn-default">Submit</button>
      </form>
    </div>
  </div>
</section>
{{/block}}
